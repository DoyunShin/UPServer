async function onload(){try{var e=window.location.href.split("/"),t=e.pop(),n=e.pop(),o=await get_metadata(n,t),d=document.getElementById("result_name"),i=document.getElementById("result_desc");d.innerHTML=o.name,i.innerHTML=o.size+" bytes   "+o.mimeType;var a="/get/"+n+"/"+t,l=o.mimeType.split("/")[0];"image"===l?result_content.image(a):"video"===l?result_content.video(a):"audio"===l?result_content.audio(a):result_content.button(a)}catch(e){console.log(e);d=document.getElementById("result_name"),i=document.getElementById("result_desc");d.innerHTML="Something went wrong!",i.innerHTML=e,document.getElementById("result_image").src="/assets/img/rickrolled.gif"}}async function get_metadata(e,t){var n="/api/v1/"+e+"/"+t;return await fetch(n).then((e=>e.json())).then((e=>e))}var result_content={button:function(e){var t=document.getElementById("result_content"),n=document.createElement("button");n.id="result_download",n.className="btn btn-primary",n.type="button",n.innerHTML="Download",n.setAttribute("onclick","window.location.href='"+e+"'"),t.appendChild(n)},image:function(e){var t=document.getElementById("result_content"),n=document.createElement("img");n.id="result_image",n.style="width: auto;height: calc(100vh * 0.4);",n.src=e,t.appendChild(n)},video:function(e){var t=document.getElementById("result_content"),n=document.createElement("video");n.id="result_video",n.style="width: auto;height: calc(100vh * 0.4);",n.src=e,n.controls=!0,t.appendChild(n)},audio:function(e){var t=document.getElementById("result_content"),n=document.createElement("audio");n.id="result_audio",n.style="width: 500px",n.src=e,n.controls=!0,t.appendChild(n)}};window.addEventListener("load",onload);